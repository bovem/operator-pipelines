---
- name: "Check if '{{ lc_config }}' file exists"
  ansible.builtin.stat:
    path: "{{ lc_config }}"
  register: lc_config_st

- name: "Fail when file '{{ lc_config }}' doesn't exists"
  ansible.builtin.fail:
    msg: "Config file '{{ lc_config }}' doens't exists !!!"
  when: not lc_config_st.stat.exists

- name: "Getting content from '{{ lc_config }}'"
  ansible.builtin.command: "cat {{ lc_config }}"
  register: lc_config_data
  changed_when: false

- name: "Sets config variables from '{{ lc_config }}' to 'lc_config_vars'"
  ansible.builtin.set_fact:
    lc_config_vars: "{{ lc_config_data.stdout | from_yaml }}"
  when:
    - lc_config_data.rc is defined
    - lc_config_data.rc == 0

- name: "Print 'lc_config_vars' information"
  ansible.builtin.debug:
    var: lc_config_vars
